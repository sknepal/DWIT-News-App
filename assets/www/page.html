<!DOCTYPE html>
<html>
<head>      <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
     <meta name="viewport" id="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height;" />
        
   
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css" />
  <link rel="stylesheet" type="text/css" href="css/index.css" />
    
  <link rel="stylesheet" type="text/css" href="css/style.css" />
     <link rel="stylesheet" type="text/css" href="css/jquery.mobile.pagination.css" />    
  <link rel="stylesheet" href="css/jquery.mobile.iscrollview.css" />
  <link rel="stylesheet" href="css/jquery.mobile.iscrollview-pull.css" />
  <script type="text/javascript" src="cordova.js"></script>
  <script type="text/javascript" src="js/libs/handlebars.js"></script>
  <script type="text/javascript" src="js/index.js"></script>
  <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
  <script type="text/javascript" src="js/jquery.mobile-1.4.5.min.js"></script>
           <script type="text/javascript" src="js/imagesloaded.pkgd.min.js"></script>
  <script type="text/javascript" src="js/SocialSharing.js"></script>
  <script src="js/iscroll.js" type="text/javascript"></script>
  <script src="js/jquery.mobile.iscrollview.js" type="text/javascript"></script>
            <script src="js/pull.js" type="text/javascript"></script>
        <script src="js/custom.js" type="text/javascript"></script>
    
        <script src="js/jquery.touchSwipe.min.js" type="text/javascript"></script>
    
  <title>Page</title>
</head>
<body>
  <div class="hwrapper" data-role="page" id="pages">
    <div class="panel left" data-role="panel" data-position="left" data-display="push" id="panel-left">
    <ul>
      <li class="home"><a href="" onclick="changePage('index.html');"  title="Home" data-rel="close" in-app="true">Home</a></li>
          <li class="authors"><a href="" onclick="changePage('authors.html');" title="Authors" data-rel="close" in-app="true" >Authors</a></li>
          <li class="aboutus"><a href="" onclick="changePage('page.html?page=about-us');" title="About Us" data-rel="close" in-app="true" >About Us</a></li>
            <li class="search"><a  href="javascript:$.mobile.activePage.find('#popupSearch').popup('open');"  data-rel="popup" data-position-to="window" data-transition="pop" title="Search" in-app="true">Search</a></li>
            
            <div data-role="popup" id="popupSearch" class="ui-content" data-theme="a" >
	<form action="" onsubmit="changePage('searchresults.html?search=' + $.mobile.activePage.find('#search').val());" target="_blank">
							<input type="search" name="search" id="search" value="" data-mini="true" placeholder="Search for..." autofocus/>

						</form>
</div>
    </ul>
  </div>
  <div class="header" data-role="header">
    <span class="open left"><a href="#panel-left">&#xe809;</a></span>
    <span class="title">DWIT News</span>
  <span class="open right"><a href="#panel-right">&#xe805;</a></span>
</div>
   
    <div class="panel right" data-role="panel" data-position="right" data-display="overlay" id="panel-right">

    <ul>
					<li class="news">
						<a href="" onclick="changePage('category.html?cat=news-3');" title="News" data-rel="close" in-app="true">News</a>
					</li>
					<li class="reviews">
						<a href="" onclick="changePage('category.html?cat=reviews');" title="Reviews" data-rel="close" in-app="true">Reviews</a>
					</li>
					<li class="people">
						<a href="" onclick="changePage('category.html?cat=people');" title="People" data-rel="close" in-app="true">People</a>
					</li>
					<li class="creativity">
						<a href="" onclick="changePage('category.html?cat=creativity');" title="Creativity" data-rel="close" in-app="true">Creativity</a>
					</li>
					<li class="opinion">
						<a href="" onclick="changePage('category.html?cat=opinion');" title="Opinion" data-rel="close" in-app="true">Opinion</a>
                        <li class="faculty">
						<a href="" onclick="changePage('category.html?cat=faculty-corner');" title="Faculty" data-rel="close" in-app="true">Faculty</a>
					</li>
				</ul>
    </div>
    <div id="page-content" data-role="content" class="page" data-iscroll>
      
      <div id="page-data" class ="pwrapper" >
   
      <script id="page-template" type="text/x-handlebars-template">
          
                      <h3 style="whitespace:normal">{{{page.title}}}</h3>
          {{{page.content}}}
          
      </script>
         
        </div>
       
    </div>
      
    <div class="footer" data-id="footer" data-role="footer" data-tap-toggle="false">
        </div>
      <script>   $('#pages').one("pageshow",function(event, ui){
  
   // $('#page-data img').addClass('is-loading');
            /*
                    var imgLoad = imagesLoaded('#page-data');
imgLoad.on( 'always', function() {
//  console.log( imgLoad.images.length + ' images loaded' );
  // detect which image is broken
  for ( var i = 0, len = imgLoad.images.length; i < len; i++ ) {
    var image = imgLoad.images[i];
    var result = image.isLoaded ? 'loaded' : 'broken';
      
      if (result=='broken'){          
           console.log( 'broken'  + image.img.src );
      $(image.img).addClass('is-broken');   
     } 
     else {
          console.log( 'not broken: ' + image.img.src );
        $(image.img).css({
            'background': '',
   'background-color': ''
  });
         
         console.log(image.img);
     }
   // console.log( 'image is ' + result + ' for ' + image.img.src );
  }
});*/
    /*$('#page-data img').imagesLoaded(function($images, $proper, $broken) {
    console.log($broken);
        console.log($images);
        console.log($proper);
});
    */
/*     var imgLoad = imagesLoaded('#page-data');
imgLoad.on( 'always', function() {
  console.log( imgLoad.images.length + ' images loaded' );
  // detect which image is broken
  for ( var i = 0, len = imgLoad.images.length; i < len; i++ ) {
    var image = imgLoad.images[i];
      image.addClass('is-loading');
    var result = image.isLoaded ? 'loaded' : 'broken';
    console.log( 'image is ' + result + ' for ' + image.img.src );
    if (result == 'broken') $(image.img).addClass('is-broken');
    
       //$(image.img).addClass('is-loading');
  }
});*/
    /*imgLoad.on( 'progress', function( instance, image ) {
 var result2 = image.isLoaded ? 'loaded' : 'broken';
  //console.log( 'image is ' + result + ' for ' + image.img.src );
        if (result2!=false)
      $(image.img).addClass('is-loading');
});*/
  // Handler for .ready() called.
    
            $.mobile.activePage.find('#panel-left').on("click", function () {
                        $.mobile.activePage.find('#panel-left').panel("close");    
  // $("#panel-left").panel("close");
  }); 
    loading();
   
    var urlParams;
(window.onpopstate = function () {
    
  var match,
  pl     = /\+/g,  // Regex for replacing addition symbol with a space
  search = /([^&=]+)=?([^&]*)/g,
  decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
  query  = window.location.search.substring(1);

  urlParams = {};
  while (match = search.exec(query))
    urlParams[decode(match[1])] = decode(match[2]);
  })();
    
   app.page(urlParams["page"]);
    
                    $("[data-iscroll]").iscrollview(); // First create iscrollview
$("[data-iscroll]").iscrollview("refresh"); // now refresh the iscrollview
                 
                 setTimeout(function(){
 $('[data-iscroll]').iscrollview("refresh");
},100);
                 
                    // Set the variable $width to the width of our wrapper on page load
     $width = $('#page-data').width();
     // Target all images inside the #content. This works best if you want to ignore certain images that are part of the layout design
     $('#page-data img').css({
          // Using jQuery CSS we write the $width variable we previously specified as a pixel value. We use max-width incase the image is smaller than our viewport it won't scale it larger. Don't forget to set height to auto or else it will squish your photos.
          'max-width' : $width , 'height' : 'auto'
          });
               
    
       }); 
          
$("#panel-left").on("click", function () {
   $("#panel-left").panel("close");
  });   
              $('form').on('submit',function(e) {
      e.preventDefault();  });
              $('a').click(function(e){
              var href = ["#panel-left", "#panel-right", "#"];
        if (!( $.inArray($(e.currentTarget).attr('href'), href) != -1  || $(e.currentTarget).attr('in-app') == 'true')) {
    e.preventDefault();
       console.log("second");
    window.open($(e.currentTarget).attr('href'), '_system', '');
   }
});
          	$(document).on("pagebeforehide","#pages",function(){ // When leaving pagetwo
                
                pageRequest.abort();
   $("body").find("*").removeAttr("disabled");
/*    $("body").find("a").unbind("click");*/
});
          
                             $(function() {      
      $("#page-content").swipe( {
        //Generic swipe handler for all directions
        swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
         // $(this).text("You swiped " + direction ); 
            console.log(direction);
            if (direction=='right')
                $.mobile.activePage.find('#panel-left').panel("open"); 
            else if (direction=='left')
                $.mobile.activePage.find('#panel-right').panel("open"); 
        }
      });
    });
  </script>
  </div>

    </body>
    </html>
